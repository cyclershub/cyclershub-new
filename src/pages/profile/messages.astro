---
import ProfileMessagesModule from '../../modules/ProfileMessagesModule.svelte';
import Layout from '../../layouts/Layout.astro';
import { verifyAccessToken } from "../../lib/verifyAccessToken";

const accessToken = Astro.cookies.get('access_token')?.value;

if (!accessToken || !verifyAccessToken(accessToken)) {
	Astro.cookies.delete('access_token');
	return Astro.redirect('/auth/login')
}


---

<Layout title="The CyclersHub">
	<ProfileMessagesModule accessToken={accessToken} client:only />
</Layout>
